@model CartDropdownVM

<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="cartDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-cart"></i>
        <span class="badge bg-danger">@Model.Items.Sum(i => i.Quantity)</span>
    </button>
    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cartDropdown">
        @if (Model.Items.Any())
        {
            <div class="px-4 py-3" style="min-width: 300px;">
                @foreach (var item in Model.Items)
                {
                    <div class="d-flex justify-content-between mb-2">
                        <div>
                            <h6 class="my-0">@item.Title</h6>
                            <small class="text-muted">Qty: @item.Quantity</small>
                        </div>
                        <span class="text-muted">$@(item.Price* item.Quantity)</span>
                    </div>
                }
                <hr>
                <div class="d-flex justify-content-between">
                    <span>Total (USD)</span>
                    <strong>$@Model.Total</strong>
                </div>
                <div class="mt-3 text-center">
                    <a asp-controller="Cart" asp-action="Index" class="btn btn-primary btn-sm">View Cart</a>
                    <a asp-controller="Checkout" asp-action="Index" class="btn btn-success btn-sm">Checkout</a>
                </div>
            </div>
        }
        else
        {
            <div class="px-4 py-3 text-center">
                <p class="mb-0">Your cart is empty</p>
                <a asp-controller="Movie" asp-action="Index" class="btn btn-primary btn-sm mt-2">Browse Movies</a>
            </div>
        }
    </div>
</div>